<header id="nav-container">
    <div id="app-name">
        <a href="/">
            <img id="app-logo" class="animate__animated animate__fadeInRightBig" src="<%= assetPath('images/Ninja-Locus-favicon-v1.png') %>" alt="">
        </a>
        <span>Ninja <br> Locus</span>
    </div>

    <% if (locals.user){ %>
    <div id="search-bar-conatiner">
        <div id="search-bar">
            <input name="name" oninput="searchEngineClass.handleSearch()" placeholder="Search by name ..." autocomplete="off">
            <i class="fas fa-search"></i>
        </div>
        <ul id="searched-users" type="none">
            <!-- <li>Name</li>
            <li>Name</li>
            <li>Name</li> -->
        </ul>
    </div>
    <% } %>
    
    <ul id="nav-menu-list" type = "none">
        <% if (locals.user){ %>
            <li id="nav-user-name">
                <a href="/users/profile/<%= locals.user.id %>">
                    <span><%= user.name %></span>
                </a>
            </li>

            <li>
                <!-- user's avatar -->
                <img id="nav-avatar" src="<%= user.avatar %>" alt="image" onerror="this.onerror=null;this.src='/images/Users-avatar.png';">

                <!-- side menu displayed when avatar is clicked -->
                <ul id="nav-side-menu-list" class="animate__animated animate__bounceInRight" type = "none">
                    <li style="position: relative; top:-2px; background-color: transparent; margin-bottom: 10px; font-size: 2rem; box-shadow: none;">
                        <span id="nav-side-menu-list-close">
                            <i class="far fa-window-close"></i>
                        </span>
                    </li>
                    <li style="pointer-events: none; color: violet; font-size: larger; border-bottom: 1px solid;">
                        <span><%= user.name %></span>
                    </li>
                    <li>
                        <a href="/">
                            <i class="fas fa-home"></i>
                            <span>Home Page</span>
                        </a>
                    </li>

                    <!-- If home page is rendered then all_users would have been defined before rendering -->
                    <% if(locals.all_users){ %>
                    <li class="displayNoneInDesktopView">
                        <a href="/" onclick="openNinjaSectionOfHomePage(event)">
                            <i class="fas fa-user-ninja" style="color: #ff5605;"></i>
                            <span>Ninjas</span>
                        </a>
                    </li>
                    <li class="displayNoneInDesktopView">
                        <a href="/" onclick="openFeedPostsSectionOfHomePage(event)">
                            <i class="fab fa-phoenix-framework" style="color: orange;"></i>
                            <span>Feed Posts</span>
                        </a>
                    </li>
                    <% } %>

                    <li>
                        <a href="/users/profile/<%= locals.user.id %>">
                            <i class="fas fa-user-alt" style="color: #0597ff;"></i>
                            <span>Profile Page</span>
                        </a>
                    </li>
                    <li>
                        <a href="/users/profile/<%= locals.user.id %>">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                    <li>
                        <a href="/users/sign-out" id="sign-out">
                            <i class="fas fa-sign-out-alt" style="color: yellowgreen;"></i>
                            <span>Sign Out</span>
                        </a>
                    </li>
                    
                    <!-- Developer Details -->
                    <li style="position: absolute; bottom: 5px;">
                        <ul style="padding: 0px;" type="none">
                            <li style="pointer-events: none;">Contact to developer <br> <span style="color: orange; font-size: larger; letter-spacing: 1px;"><b>Sumit Yadav</b></span> via</li>
                            <li>
                                <a href="https://www.linkedin.com/in/sumit-kumar-yadav/" target="_blank">
                                    <i class="fab fa-linkedin-in" style="color: #0597ff;"></i>
                                    <span>LinkedIn</span>
                                </a>
                            </li>
                            <li>
                                <a href="mailto:sumityadav0376@gmail.com?Subject=Hello%20Developer%20Sumit">
                                    <i class="far fa-envelope" style="color: yellowgreen;"></i>
                                    <span>Mail</span>
                                </a>
                            </li>
                            <li>
                                <a href="https://sumit-resume.netlify.app/">
                                    <i class="fas fa-at" style="color: violet;"></i>
                                    <span>Portfolio</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>


        <% }else{ %>

            <li>
                <a href="/users/sign-in">
                    <button type="button" class="nav-button">Sign In</button>
                </a>
            </li>

            <li>
                <a href="/users/sign-up">
                    <button type="button" class="nav-button">Sign Up</button>
                </a>
            </li>


        <% } %>
    </ul>

</header>


<% if (locals.user){ %>
    <script src="<%= assetPath('js/search_engine.js') %>"></script>
    <script>
        const searchEngineClass = new searchEngine();
    </script>

    <script src="<%= assetPath('js/header.js') %>"></script>

<% } %>